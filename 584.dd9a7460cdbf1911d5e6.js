"use strict";(self.webpackChunkstart=self.webpackChunkstart||[]).push([[584],{1336:(t,e,n)=>{n.d(e,{P:()=>x});var r=n(5893),o=n(7294),a=n(9122),i=n(787),c=n(5190),s=n(8876),u=n(7842),l=n(6402),p=n(9398);const d=n.p+"7bda1c136f91a8a2f1962c37885a1537.png";var f,h,y=n(9791),m=n(394),g=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},v=m.zo.div(f||(f=g(["\n    position: relative;\n    cursor: pointer;\n    max-width: 30rem;\n    ","\n"],["\n    position: relative;\n    cursor: pointer;\n    max-width: 30rem;\n    ","\n"])),y.II),b=m.zo.div(h||(h=g(["\n    border: 1px solid ",";\n    background-color: ",";\n    padding: 1rem;\n    height: 2rem;\n    border-radius: ",";\n    display: flex;\n    align-items: center;\n    &:after {\n        content: url(",");\n        position: absolute;\n        right: 1rem;\n        transform: ",";\n    }\n"],["\n    border: 1px solid ",";\n    background-color: ",";\n    padding: 1rem;\n    height: 2rem;\n    border-radius: ",";\n    display: flex;\n    align-items: center;\n    &:after {\n        content: url(",");\n        position: absolute;\n        right: 1rem;\n        transform: ",";\n    }\n"])),(function(t){return t.theme.colors.border}),(function(t){return t.theme.colors.backgroundItem}),(function(t){return t.theme.radiuses.items}),d,(function(t){return t.$isOpen?"rotate(180deg)":""})),x=(0,o.memo)((function(t){var e=t.options,n=t.testID,d=(0,i.T)(),f=(0,i.C)(u.bm),h=(0,i.C)(l.zF),y=(0,o.useCallback)((function(t){d((0,s.mk)(t))}),[d]);return(0,r.jsxs)(v,{"data-testid":n,"data-cy":n,children:[(0,r.jsx)(b,{$isOpen:f,onClick:function(){d((0,c.Pi)(!0))},"data-cy":"currency-choosen",children:null!==h?(0,p.m)(h):"Select currency"}),(0,r.jsx)(a.X,{options:e,onOptionClick:y})]})}))},6584:(t,e,n)=>{n.r(e),n.d(e,{Timeline:()=>ct,default:()=>ut});var r,o,a,i,c,s,u,l,p,d,f,h,y,m,g=n(5893),v=n(7294),b=n(558),x=n(6495),w=n(3234),C=n(9683),D=n(9791),j=n(394),O=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},_=j.zo.label(r||(r=O(["\n    ","\n    cursor: pointer;\n    border-bottom: ",";\n"],["\n    ","\n    cursor: pointer;\n    border-bottom: ",";\n"])),D.II,(function(t){var e=t.$isChoosen,n=t.theme;return e?"1px solid ".concat(n.colors.fontActive):""})),k=j.zo.input(o||(o=O(["\n    appearance: none;\n    margin: 0;\n"],["\n    appearance: none;\n    margin: 0;\n"]))),T=(a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},a(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return T(e,t),e.prototype.render=function(){var t=this.props,e=t.checked,n=t.value,r=t.name,o=t.onChange,a=t.testID;return(0,g.jsxs)(_,{$isChoosen:e,"data-cy":a,children:[n,(0,g.jsx)(k,{type:"radio",value:n,name:r,checked:e,onChange:o,"data-testid":a})]})},e}(v.Component),E=n(1336),I=n(745),M=n(7395),S=j.ZP.div(i||(y=["\n    position: fixed;\n    bottom: 0;\n    padding: 0.5rem 1rem;\n    background-color: ",";\n    width: 100%;\n    height: 5rem;\n    display: flex;\n    align-items: center;\n"],m=["\n    position: fixed;\n    bottom: 0;\n    padding: 0.5rem 1rem;\n    background-color: ",";\n    width: 100%;\n    height: 5rem;\n    display: flex;\n    align-items: center;\n"],Object.defineProperty?Object.defineProperty(y,"raw",{value:m}):y.raw=m,i=y),M.O9.neon),z=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.popUpElem=document.getElementById("pop-up"),e.root=null!==e.popUpElem?(0,I.s)(e.popUpElem):null,e}return z(e,t),e.prototype.componentDidMount=function(){var t=this;setTimeout((function(){var e;null===(e=t.root)||void 0===e||e.unmount()}),3e3)},e.prototype.mount=function(){var t;null===(t=this.root)||void 0===t||t.render((0,g.jsx)(e,{}))},e.prototype.render=function(){return(0,g.jsx)(S,{"data-cy":"timeline-popup",children:"Timeline for 1 month was build"})},e}(v.Component),B=function(){function t(t){this.observers=[],this.data=t}return t.prototype.processData=function(){this.notify()},t.prototype.subscribe=function(t){this.observers.includes(t)||this.observers.push(t)},t.prototype.unsubscribe=function(t){var e=this.observers.indexOf(t);-1!==e&&this.observers.splice(e,1)},t.prototype.notify=function(){for(var t=0,e=this.observers;t<e.length;t++)e[t].update(this)},t}(),L=new(function(){function t(){}return t.prototype.update=function(t){t instanceof B&&new A("").mount()},t}()),$=n(7716),F=n(7291),H=function(t){if("number"==typeof t&&(t=new Date(t)),"invalid date"===t.toString().toLowerCase())return"";var e=t.getDate()>8?t.getDate():"0".concat(t.getDate()),n=t.getMonth()>8?t.getMonth()+1:"0".concat(t.getMonth()+1),r=t.getFullYear();return"".concat(r,"-").concat(n,"-").concat(e)},U=n(244),X=n(9449),N=(n(6599),n(7574)),R=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Y=j.zo.div(c||(c=R(["\n    ",";\n    display: flex;\n    flex-direction: column;\n    gap: 3rem;\n"],["\n    ",";\n    display: flex;\n    flex-direction: column;\n    gap: 3rem;\n"])),N.Y),Z=j.zo.div(s||(s=R(["\n    display: flex;\n    flex-direction: column;\n    gap: 3rem;\n"],["\n    display: flex;\n    flex-direction: column;\n    gap: 3rem;\n"]))),K=j.zo.div(u||(u=R(["\n    display: flex;\n    gap: 2rem;\n    @media (max-width: ",") {\n        gap: 0.5rem;\n    }\n"],["\n    display: flex;\n    gap: 2rem;\n    @media (max-width: ",") {\n        gap: 0.5rem;\n    }\n"])),(function(t){return t.theme.devices.tablet})),V=(j.zo.label(l||(l=R(["\n    ","\n    cursor: pointer;\n    border-bottom: ",";\n"],["\n    ","\n    cursor: pointer;\n    border-bottom: ",";\n"])),D.II,(function(t){var e=t.$isChoosen,n=t.theme;return e?"1px solid ".concat(n.colors.fontActive):""})),j.zo.input(p||(p=R(["\n    appearance: none;\n    margin: 0;\n"],["\n    appearance: none;\n    margin: 0;\n"]))),j.zo.div(d||(d=R(["\n    display: flex;\n    gap: 3rem;\n    flex-wrap: wrap;\n"],["\n    display: flex;\n    gap: 3rem;\n    flex-wrap: wrap;\n"])))),W=j.zo.input(f||(f=R(["\n    background-color: ",";\n    color: ",";\n    color-scheme: dark;\n    border: none;\n    cursor: pointer;\n"],["\n    background-color: ",";\n    color: ",";\n    color-scheme: dark;\n    border: none;\n    cursor: pointer;\n"])),(function(t){return t.theme.colors.backgroundItem}),(function(t){return t.theme.colors.font})),G=j.zo.label(h||(h=R(["\n    display: flex;\n    gap: 1rem;\n    ","\n"],["\n    display: flex;\n    gap: 1rem;\n    ","\n"])),D.II),J=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Q=function(){return Q=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Q.apply(this,arguments)};X.kL.register(X.uw,X.f$,X.ZL,X.Dx,X.u,X.De,X.RM);var q=function(t){function e(e){var n=t.call(this,e)||this;return n.prevMonth=(new Date).setMonth((new Date).getMonth()-1),n.subject=new B(n.props.currencyTimelineData),n.setCurrencyInit=function(){var t=n.props,e=t.fetchCurrencyThunk,r=t.setCurrencies,o=(0,F.lJ)("currencyData");null!==o?r(o):e()},n.fetchCurrencyHistory=function(){null!==n.props.targetCurrencyCode&&n.props.fetchCurrencyTimelineThunk(n.props.targetCurrencyCode,n.state.historyDateStart,n.state.historyDateEnd)},n.handleChange=function(t){n.setState((function(e){var n;return Q(Q({},e),((n={})[t.target.name]=t.target.value,n))}))},n.state={historyDateStart:H(n.prevMonth),historyDateEnd:H(new Date),duration:$.vX.default,selectOptions:(0,U.p)(n.props.currencies,(function(t){return $.oN.includes(t.code)}))},n}return J(e,t),e.prototype.componentDidMount=function(){this.setCurrencyInit(),this.subject.subscribe(L)},e.prototype.componentDidUpdate=function(t,e){var n,r,o=this;t.targetCurrencyCode===this.props.targetCurrencyCode&&this.state.historyDateStart===e.historyDateStart&&this.state.historyDateEnd===e.historyDateEnd||this.fetchCurrencyHistory(),e.duration!==this.state.duration&&(this.setState((function(t){return Q(Q({},t),{duration:o.state.duration})})),this.state.duration===$.vX.default&&(this.setState({historyDateStart:H(this.prevMonth),historyDateEnd:H(new Date)}),0!==this.props.currencyTimelineData.length&&this.subject.processData())),0!==this.props.currencyTimelineData.length&&this.state.duration===$.vX.default&&this.subject.processData(),(null===(n=this.props.currencies)||void 0===n?void 0:n.meta)!==(null===(r=null==t?void 0:t.currencies)||void 0===r?void 0:r.meta)&&this.setState({selectOptions:(0,U.p)(this.props.currencies,(function(t){return $.oN.includes(t.code)}))})},e.prototype.componentWillUnmount=function(){this.subject.unsubscribe(L)},e.prototype.render=function(){var t=this,e=this.props,n=e.targetCurrencyCode,r=e.currencyTimelineData,o=e.error,a=this.state,i=a.duration,c=a.historyDateStart,s=a.historyDateEnd,u=a.selectOptions,l=function(t){var e={id:"horizontalLine",beforeDraw:function(t){var e=t.ctx,n=t.chartArea,r=n.left,o=n.width;e.save(),e.strokeStyle="".concat(M.O9.red),e.setLineDash([10,21]),e.strokeRect(r,t.getDatasetMeta(0).data[0].y-t.getDatasetMeta(0).data[0].height/2,o,0)}},n=[{id:"candlestick",beforeDatasetDraw:function(t){var e=t.ctx,n=t.data,r=t.scales.y;e.save(),e.lineWidth=2,e.strokeStyle="white",n.datasets[0].data.forEach((function(o,a){var i,c;e.setLineDash([]),e.beginPath(),e.moveTo(t.getDatasetMeta(0).data[a].x,t.getDatasetMeta(0).data[a].y),e.lineTo(t.getDatasetMeta(0).data[a].x,r.getPixelForValue(null===(c=null===(i=null==n?void 0:n.datasets[0])||void 0===i?void 0:i.data[a])||void 0===c?void 0:c.h)),e.stroke(),e.beginPath(),e.moveTo(t.getDatasetMeta(0).data[a].x,t.getDatasetMeta(0).data[a].y),e.lineTo(t.getDatasetMeta(0).data[a].x,r.getPixelForValue(n.datasets[0].data[a].l)),e.stroke()}))}},e];return{data:{datasets:[{data:t.map((function(t){return{x:t.time_open,o:t.price_open,h:t.price_high,l:t.price_low,c:t.price_close,s:[t.price_open,t.price_close]}})),backgroundColor:function(t){var e=t.raw,n=e.o,r=e.c;return"".concat(r>=n?M.O9.greenBright:M.O9.red)}}]},options:{parsing:{xAxisKey:"x",yAxisKey:"s"},adapters:{date:{locale:"enUS"}},scales:{x:{type:"timeseries",time:{unit:"day",tooltipFormat:"MMM d, yyyy"}},y:{stacked:!0,beginAtZero:!1,grace:"80%",grid:{offset:!0}}},plugins:{legend:{display:!1},tooltip:{callbacks:{beforeBody:function(t){return["PRICES","Open: ".concat(t[0].raw.o),"High: ".concat(t[0].raw.h),"Low: ".concat(t[0].raw.l),"Close: ".concat(t[0].raw.c)]},label:function(t){var e=t.raw,n=e.o;return e.c>=n?"Closed higher":"Closed lower"}}}}},plugins:n}}(r),p=l.data,d=l.options,f=l.plugins,h=Object.values($.vX),y=null!==this.props.currencyTimelineData&&0!==this.props.currencyTimelineData.length&&null!==this.props.targetCurrencyCode;return(0,g.jsxs)(Y,{children:[null!==o&&(0,g.jsx)(C.j,{text:o}),(0,g.jsxs)(Z,{children:[(0,g.jsx)(E.P,{options:u,testID:"currency-selector"}),(0,g.jsxs)(K,{children:[(0,g.jsx)("p",{children:"Choose duration:"}),h.map((function(e){return(0,g.jsx)(P,{name:"duration",value:e,onChange:t.handleChange,checked:t.state.duration===e,testID:e},e)}))]}),i===$.vX.period&&(0,g.jsxs)(V,{children:[(0,g.jsxs)(G,{children:["start date",(0,g.jsx)(W,{type:"date",value:c,name:"historyDateStart",onChange:this.handleChange,"data-cy":"history-date-start"})]}),(0,g.jsxs)(G,{children:["end date",(0,g.jsx)(W,{type:"date",value:s,name:"historyDateEnd",onChange:this.handleChange,max:H(new Date),"data-cy":"history-date-end"})]})]}),null!==n&&(0,g.jsx)(w.z,{currencyCode:n,testID:"target-currency"})]}),y&&(0,g.jsx)(x.$Q,{data:p,options:d,plugins:f,"data-testid":"timeline-chart","data-cy":"timeline-chart"})]})},e}(v.Component),tt=n(8876),et=n(5988),nt=n(5190),rt=n(7946),ot=n(2861),at=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),it=function(){return it=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},it.apply(this,arguments)},ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return at(e,t),e.prototype.render=function(){return(0,g.jsx)(q,it({},this.props))},e}(v.Component),st={fetchCurrencyThunk:et.Av,fetchCurrencyTimelineThunk:function(t,e,n){return function(r){return o=void 0,a=void 0,c=function(){var o,a,i,c;return function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),r((0,nt.BB)(!0)),[4,rt.w.getCurrencyTimeline(t,e,n)];case 1:return o=s.sent(),r((0,nt.BB)(!1)),null!==o&&r({type:"TIMELINE/FETCH_TIMELINE_HISTORY",payload:o}),[3,3];case 2:return a=s.sent(),r((0,nt.BB)(!1)),ot.default.isAxiosError(a)&&(i=null!==a.response?null===(c=a.response)||void 0===c?void 0:c.data.message:a.message,console.log(i)),[3,3];case 3:return[2]}}))},new((i=void 0)||(i=Promise))((function(t,e){function n(t){try{s(c.next(t))}catch(t){e(t)}}function r(t){try{s(c.throw(t))}catch(t){e(t)}}function s(e){var o;e.done?t(e.value):(o=e.value,o instanceof i?o:new i((function(t){t(o)}))).then(n,r)}s((c=c.apply(o,a||[])).next())}));var o,a,i,c}},setCurrencies:tt.HC};const ut=(0,b.$j)((function(t){return{baseCurrencyCode:t.currencies.baseCurrencyCode,targetCurrencyCode:t.currencies.targetCurrencyCode,currencies:t.currencies.currencies,currencyTimelineData:t.timeline.currencyTimelineData,error:t.currencies.error}}),st)(ct)},244:(t,e,n)=>{n.d(e,{p:()=>r});var r=function(t,e){return null===t?[]:Object.values(t.data).filter(e)}}}]);